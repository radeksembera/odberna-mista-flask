<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Fakturace – {{ objekt.nazev }}</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 30px;
            background-color: #f8f9fa;
        }
        h1 {
            color: #333;
        }
        table {
            border-collapse: collapse;
            margin-bottom: 30px;
            width: 100%;
            background-color: white;
        }
        th, td {
            border: 1px solid #ccc;
            padding: 8px 12px;
            text-align: left;
        }
        th {
            background-color: #f0f0f0;
        }
        .section-title {
            margin-top: 40px;
            margin-bottom: 10px;
            font-size: 1.2em;
            color: #555;
        }
        a {
            text-decoration: none;
            color: #007bff;
        }
    </style>
</head>
<body>
    <h1>Fakturace – {{ objekt.nazev }}</h1>

    <div class="section-title">Zálohová faktura</div>
    <table>
        <tr><th>Číslo zal. Fak</th><td contenteditable="true" data-field="cislo_zalohy" data-id="1">28032502</td></tr>
        <tr><th>Konstantní symbol</th><td contenteditable="true" data-field="konst_symbol" data-id="1">308</td></tr>
        <tr><th>VS</th><td contenteditable="true" data-field="vs" data-id="1">28032502</td></tr>
        <tr><th>Období</th><td contenteditable="true" data-field="obdobi" data-id="1">3/2025</td></tr>
        <tr><th>Datum splatnosti</th><td contenteditable="true" data-field="splatnost" data-id="1">28.04.2025</td></tr>
        <tr><th>Forma úhrady</th><td contenteditable="true" data-field="forma_uhrady" data-id="1">příkazem k úhradě</td></tr>
        <tr><th>Datum vystavení</th><td contenteditable="true" data-field="vystaveni" data-id="1">14.04.2025</td></tr>
        <tr><th>Záloha</th><td contenteditable="true" data-field="castka_zalohy" data-id="1">850 000,00</td></tr>
    </table>
    
    <div class="section-title">Faktura</div>
    <table>
        <tr><th>Číslo faktury</th><td contenteditable="true" data-field="cislo_faktury" data-id="2">270325044</td></tr>
        <tr><th>Konstantní symbol</th><td contenteditable="true" data-field="konst_symbol" data-id="2">308</td></tr>
        <tr><th>VS</th><td contenteditable="true" data-field="vs" data-id="2">270325044</td></tr>
        <tr><th>Datum splatnosti</th><td contenteditable="true" data-field="splatnost" data-id="2">28.04.2025</td></tr>
        <tr><th>Datum vystavení</th><td contenteditable="true" data-field="vystaveni" data-id="2">14.04.2025</td></tr>
        <tr><th>Datum zdanit. plnění</th><td contenteditable="true" data-field="zdanitelne_plneni" data-id="2">31.03.2025</td></tr>
        <tr><th>Forma úhrady</th><td contenteditable="true" data-field="forma_uhrady" data-id="2">příkazem k úhradě</td></tr>
        <tr><th>Popis dodávky</th><td contenteditable="true" data-field="popis" data-id="2">Vyúčtování 202503</td></tr>
        <tr><th>Sazba DPH</th><td contenteditable="true" data-field="dph" data-id="2">21%</td></tr>
        <tr><th>Od</th><td contenteditable="true" data-field="od" data-id="2">01.03.2025</td></tr>
        <tr><th>Do</th><td contenteditable="true" data-field="do" data-id="2">31.03.2025</td></tr>
        <tr><th>Header příjemce 1</th><td contenteditable="true" data-field="header1" data-id="2">Číslo 270325022 Your energy, s.r.o., Italská 2584/69, 120 00 Praha 2 – Vinohrady, DIC CZ24833851, IČO 24833851</td></tr>
        <tr><th>Header příjemce 2</th><td contenteditable="true" data-field="header2" data-id="2">Číslo 270325022 Your energy, s.r.o., Italská 2584/69, 120 00 Praha 2 – Vinohrady, DIC CZ24833851, IČO 24833851</td></tr>
    </table>
    

    <a href="{{ url_for('objekty') }}">← Zpět na objekty</a>

    <script>
        document.querySelectorAll('td[contenteditable="true"]').forEach(cell => {
            cell.addEventListener('blur', () => {
                const newValue = cell.textContent.trim();
                const field = cell.getAttribute('data-field');
                const id = cell.getAttribute('data-id');
        
                fetch('/update_faktura_field', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        id: id,
                        field: field,
                        value: newValue
                    })
                })
                .then(res => res.json())
                .then(data => {
                    if (!data.success) {
                        alert('Chyba při ukládání!');
                    }
                });
            });
        });
        </script>
        
        </body>
        </html>







</body>
</html>
